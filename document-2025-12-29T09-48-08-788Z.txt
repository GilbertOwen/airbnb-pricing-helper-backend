ðŸ§  Airbnb Pricing & Booking Prediction â€” Backend (Seattle)
FastAPI backend untuk:

Prediksi harga per malam (regresi)
Simulasi probabilitas booking 7-hari
Menyediakan API yang dipanggil oleh frontend


Catatan: Model & data hanya untuk Seattle. Sistem tidak serverless-friendly (disarankan RAM â‰¥ 1.5 GB).


Daftar Isi

Ringkasan
Struktur Folder
Instalasi & Menjalankan (Local)
Training (Opsional)
API Endpoints
Metrics & Artefak Model
Deployment Notes
Limitations
Lisensi


Ringkasan

Price model: HistGradientBoostingRegressor (target: log(price))
Bayesian Network: PriceBucket_static â†’ Low / Typical / High (interpretability)
Booking model: Probabilitas booking selama 7 hari (menggunakan anchor dari dataset; custom listing â†’ nearest peer)


Struktur Folder
backend/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ index.py               # Production entry (optional)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.py                 # FastAPI app (entry untuk dev)
â”‚   â”œâ”€â”€ schemas.py             # Pydantic schemas
â”‚   â”œâ”€â”€ pricing/               # Logic rekomendasi harga & preprocessing
â”‚   â”œâ”€â”€ booking/               # Logic prediksi booking
â”‚   â”œâ”€â”€ modeling/              # Scripts training & utilities
â”‚   â”œâ”€â”€ etl/                   # Feature building
â”‚   â””â”€â”€ utils/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ bn/bn_model.pkl
â”‚   â”œâ”€â”€ regression/price_reg.pkl
â”‚   â”œâ”€â”€ regression/feature_columns.json
â”‚   â””â”€â”€ booking/booking_clf.pkl
â”œâ”€â”€ data/
â”‚   â””â”€â”€ processed/features_listings_with_peer.parquet
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
Instalasi & Menjalankan (Local)
1. Buat virtual environment
python -m venv .venv
macOS / Linux
source .venv/bin/activate
Windows (PowerShell)
.venv\Scripts\Activate.ps1
2. Install dependencies
pip install -r requirements.txt
3. Run dev server
uvicorn src.app:app --reload --port 8000
Swagger UI: http://localhost:8000/
Training (Opsional)
Jika ingin melatih ulang model dari data mentah:


Build features
python -m src.etl.build_listing_features


Train price regression
python -m src.modeling.regression_train_price


Train booking model
python -m src.modeling.booking_train_model



Hasil training ditempatkan di folder models/. Pastikan feature_columns.json dipakai saat inference.

API Endpoints
Berikut ringkasan endpoint utama. Dokumentasi lengkap tersedia di /docs.
Health Check
GET /health
{"status": "ok"}
Rekomendasi Harga â€” Dataset Listing
POST /recommend_by_index
{
"row_index": 0,
"weekend_flag": true,
"holiday_flag": false
}
Rekomendasi Harga â€” Custom Listing
POST /recommend_from_features
{
"room_type": "Entire home/apt",
"accommodates": 2,
"bathrooms": 1,
"amenities": "Wifi,Kitchen",
"minimum_nights": 1,
"instant_bookable": true,
"latitude": 47.61,
"longitude": -122.33,
"weekend_flag": false,
"holiday_flag": false
}
Booking 7-Hari â€” Dataset Listing
POST /booking_week_by_index
{
"row_index": 0,
"start_date": "2025-01-10",
"base_price": 120
}
Response Umum:

recommended_price
price_bucket
price_explanations (feature importance / BN explanation)
booking_probabilities (per hari & agregat 7-hari)

Metrics & Artefak Model
Price Regression Metrics:

MAE â‰ˆ $32.7
RÂ² â‰ˆ 0.63
SMAPE â‰ˆ 23.7%

Artefak Penting:

models/bn/bn_model.pkl
models/regression/price_reg.pkl
models/regression/feature_columns.json
models/booking/booking_clf.pkl

Limitations

Hanya dilatih pada dataset Seattle.
Booking model tidak aware event real-time (konser, konferensi, dll).
Prediksi booking untuk custom listing adalah aproksimasi via nearest dataset peer.

Lisensi
Academic / Educational Use


